version: '3'

services:
    node:
        build: './docker/node/'
        image: 'skeleton/node:lts'
        environment:
            YARN_CACHE_FOLDER: '/home/yarn-cache'
        user: '${CURRENT_IDS}'
        volumes:
            - './:/srv/app'
            - '~/.cache/yarn:/home/yarn-cache'
        working_dir: '/srv/app'
        networks:
            - 'app-skeleton'

    nginx-front:
        image: 'nginx:alpine'
        volumes:
            - './public:/usr/share/nginx/html:ro'
        networks:
            - 'app-skeleton'

networks:
    app-skeleton:
        driver: 'bridge'
